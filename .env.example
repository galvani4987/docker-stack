# Credenciais do Banco de Dados PostgreSQL
# Substitua a senha abaixo por uma senha forte e única no seu arquivo .env
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=<CHANGE_THIS_TO_A_STRONG_PASSWORD>

# Variáveis para n8n
N8N_DB_TYPE=postgres
N8N_DB_POSTGRESDB_HOST=postgres
N8N_DB_POSTGRESDB_PORT=5432
N8N_DB_POSTGRESDB_USER=${POSTGRES_USER}
N8N_DB_POSTGRESDB_PASSWORD=${POSTGRES_PASSWORD}
N8N_DB_POSTGRESDB_DATABASE=${POSTGRES_DB}
N8N_WEBHOOK_URL=https://n8n.galvani4987.duckdns.org # <-- Altere para seu domínio real
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_RUNNERS_ENABLED=false # Ou true se você planeja usar runners

# Configurações do Caddy
# Email para certificados SSL (Let's Encrypt). Substitua pelo seu email.
CADDY_EMAIL=your_email@example.com
# Token do DuckDNS para o Caddy (usado se o Caddy for configurado com o plugin DuckDNS para desafios ACME DNS)
# DUCKDNS_TOKEN=<YOUR_DUCKDNS_TOKEN>

# Configurações do Redis
# Password for Redis, used by Authelia for session storage.
# IMPORTANT: Change this to a strong, unique password.
REDIS_PASSWORD=your_strong_redis_password_here

# Authelia Configuration
# ======================
# DOMAIN_NAME should be your main domain, e.g., example.com
DOMAIN_NAME=galvani4987.duckdns.org

# Secrets - Generate these with 'openssl rand -hex 32' or similar
AUTHELIA_JWT_SECRET=your_strong_jwt_secret_here_CHANGE_ME
AUTHELIA_SESSION_SECRET=your_strong_session_secret_here_CHANGE_ME
AUTHELIA_STORAGE_ENCRYPTION_KEY=your_strong_storage_encryption_key_here_CHANGE_ME # For encrypting data at rest if applicable

# Default redirection URL after login
AUTHELIA_DEFAULT_REDIRECTION_URL=https://homer.${DOMAIN_NAME} # Or your main dashboard URL

# Server settings
AUTHELIA_SERVER_HOST=0.0.0.0
AUTHELIA_SERVER_PORT=9091
AUTHELIA_LOG_LEVEL=info # (debug, info, warn, error)
AUTHELIA_THEME=auto

# Session configuration (domain should match your main domain)
AUTHELIA_SESSION_DOMAIN=${DOMAIN_NAME}
AUTHELIA_SESSION_NAME=authelia_session
AUTHELIA_SESSION_EXPIRATION=1h
AUTHELIA_SESSION_INACTIVITY=5m

# Redis (Session Storage)
AUTHELIA_REDIS_HOST=redis # Name of the Redis service in docker-compose
AUTHELIA_REDIS_PORT=6379
AUTHELIA_REDIS_PASSWORD=${REDIS_PASSWORD} # Use the Redis password defined above
# AUTHELIA_REDIS_DATABASE_INDEX=0 # Optional
# AUTHELIA_REDIS_USERNAME="" # Optional, if Redis needs username

# Storage (PostgreSQL for audit/notifications, as per docs/setup_authelia.md template)
# If using file storage for users, these are for other storage backends Authelia might use.
AUTHELIA_STORAGE_POSTGRES_HOST=postgres # Name of the Postgres service
AUTHELIA_STORAGE_POSTGRES_PORT=5432
AUTHELIA_STORAGE_POSTGRES_USERNAME=${POSTGRES_USER}
AUTHELIA_STORAGE_POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
AUTHELIA_STORAGE_POSTGRES_DATABASE=${POSTGRES_DB} # Or a dedicated Authelia DB
AUTHELIA_STORAGE_POSTGRES_SSL_MODE=disable # Adjust if your Postgres requires SSL

# Notifier (Filesystem, as per docs/setup_authelia.md template)
AUTHELIA_NOTIFIER_FILESYSTEM_FILENAME=/config/notification.txt

# Access Control
AUTHELIA_ACCESS_CONTROL_DEFAULT_POLICY=deny

# Identity Providers (Password Policy)
AUTHELIA_IDENTITY_PROVIDERS_OIDC_HMAC_SECRET=your_strong_oidc_hmac_secret_here_CHANGE_ME # For OIDC
AUTHELIA_PASSWORD_RESET_DISABLE=true # Example, adjust as needed
AUTHELIA_PASSWORD_POLICY_STANDARD_ENABLED=true
AUTHELIA_PASSWORD_POLICY_STANDARD_MIN_LENGTH=8
AUTHELIA_PASSWORD_POLICY_STANDARD_MAX_LENGTH=0 # 0 for no max length
AUTHELIA_PASSWORD_POLICY_STANDARD_REQUIRE_LOWERCASE=true
AUTHELIA_PASSWORD_POLICY_STANDARD_REQUIRE_UPPERCASE=true
AUTHELIA_PASSWORD_POLICY_STANDARD_REQUIRE_NUMBER=true
AUTHELIA_PASSWORD_POLICY_STANDARD_REQUIRE_SPECIAL=true

# WAHA (WhatsApp HTTP API) Configuration
# ======================================
# API Key for securing WAHA endpoints (mandatory for production)
WHATSAPP_API_KEY=your_strong_waha_api_key_CHANGE_ME

# Base URL where WAHA API will be accessible (used for Swagger, webhooks)
# Should match the Caddy configuration, e.g., https://waha.yourdomain.com
WAHA_BASE_URL=https://waha.${DOMAIN_NAME} # Uses DOMAIN_NAME from above

# Webhook URL where WAHA will send events (e.g., to your n8n instance)
WHATSAPP_HOOK_URL=https://n8n.${DOMAIN_NAME}/webhook/whatsapp # Example for n8n

# Comma-separated list of events to listen for (e.g., message, presence, call)
# Example: "message,ack,presence,call,message.image,message.audio,message.video,message.document"
WHATSAPP_HOOK_EVENTS=message,ack

# WAHA Debug Mode (true or false)
WAHA_DEBUG_MODE=false

# WAHA Log Level (e.g., info, debug, warn, error)
WAHA_LOG_LEVEL=info

# Timezone for WAHA (e.g., America/Sao_Paulo) - already defined globally as TZ, but can be specific if needed
# TZ_WAHA=${TZ}

